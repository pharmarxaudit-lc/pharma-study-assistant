2025-10-17 09:27:26,617 [INFO] __main__: ================================================================================
2025-10-17 09:27:26,617 [INFO] __main__: Pharmacy Exam Prep Application Starting
2025-10-17 09:27:26,617 [INFO] __main__: Upload folder: /Users/luiscotto/Code/pharma-study-assistant/uploads
2025-10-17 09:27:26,617 [INFO] __main__: Output folder: /Users/luiscotto/Code/pharma-study-assistant/outputs
2025-10-17 09:27:26,617 [INFO] __main__: Anthropic API Key configured: True
2025-10-17 09:27:26,617 [INFO] __main__: ================================================================================
2025-10-17 09:27:26,620 [INFO] __main__: Starting Flask server on port 5001 (debug=False)
 * Serving Flask app 'app'
 * Debug mode: off
Address already in use
Port 5001 is in use by another program. Either identify and stop that program, or start the server with a different port.
2025-10-17 09:27:29,186 [DEBUG] __main__: Health check requested
2025-10-17 09:27:29,186 [INFO] __main__: Health check: {'status': 'healthy', 'claude_configured': True, 'timestamp': '2025-10-17T09:27:29.186872'}
2025-10-17 09:27:29,187 [INFO] werkzeug: 127.0.0.1 - - [17/Oct/2025 09:27:29] "GET /api/health HTTP/1.1" 200 -
2025-10-17 09:27:30,271 [DEBUG] __main__: Serving index.html
2025-10-17 09:27:30,273 [INFO] werkzeug: 127.0.0.1 - - [17/Oct/2025 09:27:30] "GET / HTTP/1.1" 200 -
2025-10-17 09:27:30,280 [INFO] werkzeug: 127.0.0.1 - - [17/Oct/2025 09:27:30] "GET /assets/index-BQnksYp8.js HTTP/1.1" 200 -
2025-10-17 09:27:30,283 [INFO] werkzeug: 127.0.0.1 - - [17/Oct/2025 09:27:30] "GET /assets/index-BRCLoibm.css HTTP/1.1" 200 -
2025-10-17 09:27:34,860 [INFO] __main__: GET /api/maintenance/db-check-schema
2025-10-17 09:27:34,868 [INFO] werkzeug: 127.0.0.1 - - [17/Oct/2025 09:27:34] "GET /api/maintenance/db-check-schema HTTP/1.1" 200 -
2025-10-17 09:27:35,944 [INFO] __main__: GET /api/maintenance/db-check-schema
2025-10-17 09:27:35,945 [INFO] werkzeug: 127.0.0.1 - - [17/Oct/2025 09:27:35] "GET /api/maintenance/db-check-schema HTTP/1.1" 200 -
2025-10-17 09:27:40,605 [INFO] __main__: GET /api/maintenance/db-info
2025-10-17 09:27:40,643 [ERROR] __main__: Error getting database info: (sqlite3.OperationalError) no such column: study_sessions.pass_threshold
[SQL: SELECT count(*) AS count_1 
FROM (SELECT study_sessions.id AS study_sessions_id, study_sessions.document_id AS study_sessions_document_id, study_sessions.session_type AS study_sessions_session_type, study_sessions.topic_filter AS study_sessions_topic_filter, study_sessions.difficulty_filter AS study_sessions_difficulty_filter, study_sessions.total_questions AS study_sessions_total_questions, study_sessions.time_limit_minutes AS study_sessions_time_limit_minutes, study_sessions.pass_threshold AS study_sessions_pass_threshold, study_sessions.start_time AS study_sessions_start_time, study_sessions.end_time AS study_sessions_end_time, study_sessions.correct_answers AS study_sessions_correct_answers, study_sessions.incorrect_answers AS study_sessions_incorrect_answers, study_sessions.score_percentage AS study_sessions_score_percentage, study_sessions.status AS study_sessions_status 
FROM study_sessions) AS anon_1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/Users/luiscotto/opt/anaconda3/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/luiscotto/opt/anaconda3/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: study_sessions.pass_threshold

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "backend/app.py", line 879, in get_database_info
    'study_sessions': session.query(StudySession).count(),
  File "/Users/luiscotto/opt/anaconda3/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3146, in count
    self._legacy_from_self(col).enable_eagerloads(False).scalar()
  File "/Users/luiscotto/opt/anaconda3/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 2835, in scalar
    ret = self.one()
  File "/Users/luiscotto/opt/anaconda3/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 2808, in one
    return self._iter().one()  # type: ignore
  File "/Users/luiscotto/opt/anaconda3/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/Users/luiscotto/opt/anaconda3/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
  File "/Users/luiscotto/opt/anaconda3/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/Users/luiscotto/opt/anaconda3/lib/python3.8/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
  File "/Users/luiscotto/opt/anaconda3/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
  File "/Users/luiscotto/opt/anaconda3/lib/python3.8/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/Users/luiscotto/opt/anaconda3/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/luiscotto/opt/anaconda3/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
  File "/Users/luiscotto/opt/anaconda3/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/luiscotto/opt/anaconda3/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/luiscotto/opt/anaconda3/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/luiscotto/opt/anaconda3/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: study_sessions.pass_threshold
[SQL: SELECT count(*) AS count_1 
FROM (SELECT study_sessions.id AS study_sessions_id, study_sessions.document_id AS study_sessions_document_id, study_sessions.session_type AS study_sessions_session_type, study_sessions.topic_filter AS study_sessions_topic_filter, study_sessions.difficulty_filter AS study_sessions_difficulty_filter, study_sessions.total_questions AS study_sessions_total_questions, study_sessions.time_limit_minutes AS study_sessions_time_limit_minutes, study_sessions.pass_threshold AS study_sessions_pass_threshold, study_sessions.start_time AS study_sessions_start_time, study_sessions.end_time AS study_sessions_end_time, study_sessions.correct_answers AS study_sessions_correct_answers, study_sessions.incorrect_answers AS study_sessions_incorrect_answers, study_sessions.score_percentage AS study_sessions_score_percentage, study_sessions.status AS study_sessions_status 
FROM study_sessions) AS anon_1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-10-17 09:27:40,649 [INFO] werkzeug: 127.0.0.1 - - [17/Oct/2025 09:27:40] "[35m[1mGET /api/maintenance/db-info HTTP/1.1[0m" 500 -
2025-10-17 09:27:42,031 [INFO] __main__: GET /api/maintenance/db-info
2025-10-17 09:27:42,035 [ERROR] __main__: Error getting database info: (sqlite3.OperationalError) no such column: study_sessions.pass_threshold
[SQL: SELECT count(*) AS count_1 
FROM (SELECT study_sessions.id AS study_sessions_id, study_sessions.document_id AS study_sessions_document_id, study_sessions.session_type AS study_sessions_session_type, study_sessions.topic_filter AS study_sessions_topic_filter, study_sessions.difficulty_filter AS study_sessions_difficulty_filter, study_sessions.total_questions AS study_sessions_total_questions, study_sessions.time_limit_minutes AS study_sessions_time_limit_minutes, study_sessions.pass_threshold AS study_sessions_pass_threshold, study_sessions.start_time AS study_sessions_start_time, study_sessions.end_time AS study_sessions_end_time, study_sessions.correct_answers AS study_sessions_correct_answers, study_sessions.incorrect_answers AS study_sessions_incorrect_answers, study_sessions.score_percentage AS study_sessions_score_percentage, study_sessions.status AS study_sessions_status 
FROM study_sessions) AS anon_1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/Users/luiscotto/opt/anaconda3/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/luiscotto/opt/anaconda3/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: study_sessions.pass_threshold

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "backend/app.py", line 879, in get_database_info
    'study_sessions': session.query(StudySession).count(),
  File "/Users/luiscotto/opt/anaconda3/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 3146, in count
    self._legacy_from_self(col).enable_eagerloads(False).scalar()
  File "/Users/luiscotto/opt/anaconda3/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 2835, in scalar
    ret = self.one()
  File "/Users/luiscotto/opt/anaconda3/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 2808, in one
    return self._iter().one()  # type: ignore
  File "/Users/luiscotto/opt/anaconda3/lib/python3.8/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/Users/luiscotto/opt/anaconda3/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
  File "/Users/luiscotto/opt/anaconda3/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/Users/luiscotto/opt/anaconda3/lib/python3.8/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
  File "/Users/luiscotto/opt/anaconda3/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
  File "/Users/luiscotto/opt/anaconda3/lib/python3.8/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/Users/luiscotto/opt/anaconda3/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/Users/luiscotto/opt/anaconda3/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
  File "/Users/luiscotto/opt/anaconda3/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/luiscotto/opt/anaconda3/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/luiscotto/opt/anaconda3/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/luiscotto/opt/anaconda3/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: study_sessions.pass_threshold
[SQL: SELECT count(*) AS count_1 
FROM (SELECT study_sessions.id AS study_sessions_id, study_sessions.document_id AS study_sessions_document_id, study_sessions.session_type AS study_sessions_session_type, study_sessions.topic_filter AS study_sessions_topic_filter, study_sessions.difficulty_filter AS study_sessions_difficulty_filter, study_sessions.total_questions AS study_sessions_total_questions, study_sessions.time_limit_minutes AS study_sessions_time_limit_minutes, study_sessions.pass_threshold AS study_sessions_pass_threshold, study_sessions.start_time AS study_sessions_start_time, study_sessions.end_time AS study_sessions_end_time, study_sessions.correct_answers AS study_sessions_correct_answers, study_sessions.incorrect_answers AS study_sessions_incorrect_answers, study_sessions.score_percentage AS study_sessions_score_percentage, study_sessions.status AS study_sessions_status 
FROM study_sessions) AS anon_1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-10-17 09:27:42,035 [INFO] werkzeug: 127.0.0.1 - - [17/Oct/2025 09:27:42] "[35m[1mGET /api/maintenance/db-info HTTP/1.1[0m" 500 -
2025-10-17 09:27:48,135 [INFO] __main__: POST /api/maintenance/db-reset
2025-10-17 09:27:48,135 [WARNING] __main__: 🔥 DATABASE RESET REQUESTED - This will delete all data!
2025-10-17 09:27:48,154 [INFO] __main__: ✅ Database reset complete
2025-10-17 09:27:48,154 [INFO] werkzeug: 127.0.0.1 - - [17/Oct/2025 09:27:48] "POST /api/maintenance/db-reset HTTP/1.1" 200 -
2025-10-17 09:27:53,579 [INFO] __main__: GET /api/maintenance/db-check-schema
2025-10-17 09:27:53,580 [INFO] werkzeug: 127.0.0.1 - - [17/Oct/2025 09:27:53] "GET /api/maintenance/db-check-schema HTTP/1.1" 200 -
